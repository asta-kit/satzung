%% Dieses LaTeX-File wird nur in die Unterordner gesymlinkt und kompiliert eine
%% einzelne Ordnung

\documentclass[
	a4paper,
	parskip=half,
	numbers=noenddot,
%	titlepage,
%	twoside,  % Benutze diese Optionen für Booklet-Layout
%	BCOR=2mm, % Auskommentiert für bessere Bildschirmdarstellung
	DIV=12,
]{scrartcl}

\synctex=1

%%% rubber: module xelatex
\usepackage{ifxetex}
\ifxetex
	\usepackage{fontspec}% provides font selecting commands
	%\setmainfont[Mapping=tex-text]{Adobe Garamond Pro}
	%\setsansfont[Mapping=tex-text]{Myriad Pro}
\else
	\usepackage[T1]{fontenc}
	\usepackage[utf8]{inputenc}
\fi

\usepackage[ngerman]{babel}

% Wir brauchen scrjura aus den koma-script-Klassen in mindestens Version 0.7
% sonst werden auch einzelne Absätze nummeriert. Falls nicht vorhanden unter
% http://mirrors.ctan.org/install/macros/latex/contrib/koma-script.tds.zip
% runterladen und in ~/texmf/ entpacken (evtl. noch "texhash ~/texmf/" ausführen)
\usepackage[juratotoc,juratocindent=0pt,ref=parlong,ref=nosentence]{scrjura}[2013/11/04]

% Verwende multicol für den Zwei-Spalten-Satz
% Erlaubt Umschaltung innerhalb der Seite und gleicht die Spalten aus
\usepackage{multicol}
% Setze Abstand zwischen Spalten
\setlength{\columnsep}{5mm}

% Für leichteres Programmieren
\usepackage{xifthen}

% Großbuchstaben für die Untergliederungen
\renewcommand{\thesection}{\Alph{section}}

% Setze einen kleinen Abstand \, zwischen Zahl und Buchstabe bei Paragraphen
\renewcommand*{\thecontractSubParagraph}{%
{\theParagraph\,\alph{contractSubParagraph})}}

% Größerer Abstand zwischen Paragraphennummer und -titel im Inhaltsverzeichnis
\renewcommand{\numberline}[1]{\makebox[2.5em][l]{#1}}


% Aus irgendeinem Grund werden chapters nicht als Absatz in einem Paragraphen
% fehlinterpretiert sections aber schon und dementsprechend wird vor ihnen eine
% Absatznummer eingefügt => definiere eigenen Befehl (macht es auch einfacher
% wenn man doch wieder scrbook und chapters will)
\newcommand{\jursection}[1]{\parnumberfalse\section{#1}\parnumbertrue}


\usepackage[pdfusetitle, pdfborder={0 0 0}]{hyperref}


% Befehle für Metainformationen
\makeatletter
\newcommand*{\@stupadate}{Noch nicht beschlossen}
\newcommand*{\@publishdate}{Noch nicht veröffentlicht}
\newcommand*{\@jurchanges}{Noch nicht veröffentlicht}
\newcommand*{\stupadate}[1]{\renewcommand*{\@stupadate}{#1}}
\newcommand*{\publishdate}[1]{\renewcommand*{\@publishdate}{#1}}
\newcommand*{\jurchanges}[1]{\renewcommand*{\@jurchanges}{Eingearbeitete Änderungen:\begin{itemize}#1\end{itemize}}}


% Mit diesem Kommando wird der Dokumenttitel gesetzt. Geht nicht das in dem Environment zu machen weil man da drin nicht das \begin{document} gesetzt werden kann und der Titel schon in der Präambel gesetzt werden muss
\newcommand{\jurtitle}[2][]{
\ifthenelse{\isempty{#1}}{\def\shorttitle{#2}}{\def\shorttitle{#1}}

\title{#2}
\author{}
\date{
	\begin{tabular}{ll}
	Beschluss: & \@stupadate \\
	Veröffentlichung: & \@publishdate \\
	\end{tabular}
}

% Setze Titel des Dokuments als Kopfzeile
\usepackage{scrlayer-scrpage}
\pagestyle{scrheadings}
\lohead{\shorttitle}
\rohead{Beschlossen: \@stupadate}

\begin{document}

\maketitle

\@jurchanges

Im Folgenden wird aus Gründen der besseren Lesbarkeit ausschließlich die weibliche Form verwendet. Dabei ist jede andere Form impliziert. Die Geschlechtsdefinition obliegt jeder Person selbst.

\begin{multicols}{2}
\tableofcontents
\end{multicols}

\bigskip
}% Ende von \jurtitle


% Diese Umgebung umschließt das eigentliche Dokument
\newenvironment{jurdoc}{% begin{jurdoc}
\begin{multicols}{2}%
\begin{contract}%
\setcounter{Paragraph}{0}%
%
}{% end{jurdoc}
\end{contract}%
\end{multicols}%
}% Ende von jurdoc

\makeatother


\input{document.core.tex}


\end{document}
